# QuillSpace Environment Configuration
# Copy this file to .env and update the values for your environment

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL - Primary Database
DATABASE_URL=postgresql://quillspace:dev_password@localhost:5432/quillspace_dev
DATABASE_MAX_CONNECTIONS=20
DATABASE_MIN_CONNECTIONS=5
DATABASE_ACQUIRE_TIMEOUT=30
DATABASE_IDLE_TIMEOUT=600
DATABASE_MAX_LIFETIME=1800

# ClickHouse - Analytics Database
CLICKHOUSE_URL=http://quillspace:dev_password@localhost:8123/analytics_dev
CLICKHOUSE_MAX_CONNECTIONS=10
CLICKHOUSE_TIMEOUT=30

# Redis - Cache and Sessions
REDIS_URL=redis://:dev_password@localhost:6379
REDIS_MAX_CONNECTIONS=10
REDIS_TIMEOUT=5

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Server Configuration
HOST=0.0.0.0
PORT=3000
API_BASE_URL=http://localhost:3000
FRONTEND_URL=http://localhost:5173

# Environment
NODE_ENV=development
RUST_ENV=development
RUST_LOG=debug,sqlx=info,tower_http=debug
RUST_BACKTRACE=1

# Security
JWT_SECRET=your_jwt_secret_key_minimum_32_characters_for_development_only
JWT_EXPIRATION=3600
REFRESH_TOKEN_EXPIRATION=604800
BCRYPT_COST=12

# CORS
CORS_ORIGINS=http://localhost:5173,http://localhost:3000
CORS_CREDENTIALS=true

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# Email Configuration (Development - using Mailhog)
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@quillspace.local
SMTP_FROM_NAME=QuillSpace Dev

# File Storage (Development - using MinIO)
S3_ENDPOINT=http://localhost:9000
S3_BUCKET=quillspace-dev
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_REGION=us-east-1
S3_PUBLIC_URL=http://localhost:9000/quillspace-dev

# CDN Configuration (Optional)
CDN_URL=
CDN_ENABLED=false

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Metrics
METRICS_ENABLED=true
PROMETHEUS_ENDPOINT=http://localhost:9090

# Tracing
TRACING_ENABLED=true
JAEGER_ENDPOINT=http://localhost:14268/api/traces
OTEL_SERVICE_NAME=quillspace-api
OTEL_SERVICE_VERSION=0.1.0

# Logging
LOG_LEVEL=debug
LOG_FORMAT=json
LOG_FILE=logs/quillspace.log

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Analytics
ANALYTICS_ENABLED=true
ANALYTICS_SAMPLING_RATE=1.0

# Authentication
OAUTH_GOOGLE_ENABLED=false
OAUTH_GOOGLE_CLIENT_ID=
OAUTH_GOOGLE_CLIENT_SECRET=

OAUTH_GITHUB_ENABLED=false
OAUTH_GITHUB_CLIENT_ID=
OAUTH_GITHUB_CLIENT_SECRET=

# Content Features
CONTENT_VERSIONING_ENABLED=true
CONTENT_COLLABORATION_ENABLED=true
CONTENT_AI_ASSISTANCE_ENABLED=false

# Multi-tenancy
TENANT_SUBDOMAIN_ENABLED=true
TENANT_CUSTOM_DOMAINS_ENABLED=true
TENANT_ISOLATION_STRICT=true

# =============================================================================
# RATE LIMITING
# =============================================================================

# API Rate Limits (requests per hour)
RATE_LIMIT_GLOBAL=10000
RATE_LIMIT_PER_TENANT=1000
RATE_LIMIT_PER_USER=100
RATE_LIMIT_AUTH=50

# Upload Limits
MAX_FILE_SIZE_MB=10
MAX_FILES_PER_TENANT=1000
MAX_STORAGE_PER_TENANT_GB=5

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Hot Reload
HOT_RELOAD_ENABLED=true
WATCH_FILES=true

# Debug Features
DEBUG_SQL=false
DEBUG_REQUESTS=false
DEBUG_TENANT_CONTEXT=true

# Test Data
SEED_DATABASE=true
CREATE_TEST_TENANTS=true
CREATE_TEST_USERS=true

# =============================================================================
# PRODUCTION OVERRIDES
# =============================================================================
# These settings should be overridden in production environments

# Security (Production)
# JWT_SECRET=generate_a_secure_random_key_for_production
# BCRYPT_COST=14

# Database (Production)
# DATABASE_URL=postgresql://user:password@prod-db:5432/quillspace
# DATABASE_MAX_CONNECTIONS=50
# DATABASE_SSL_MODE=require

# Redis (Production)
# REDIS_URL=redis://user:password@prod-redis:6379
# REDIS_TLS=true

# Email (Production)
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USERNAME=apikey
# SMTP_PASSWORD=your_sendgrid_api_key
# SMTP_TLS=true

# Storage (Production)
# S3_ENDPOINT=https://s3.amazonaws.com
# S3_BUCKET=quillspace-prod
# S3_ACCESS_KEY=your_aws_access_key
# S3_SECRET_KEY=your_aws_secret_key

# Monitoring (Production)
# JAEGER_ENDPOINT=https://your-jaeger-instance.com
# PROMETHEUS_ENDPOINT=https://your-prometheus-instance.com

# =============================================================================
# TENANT-SPECIFIC OVERRIDES
# =============================================================================
# These can be overridden per tenant in the database

# Branding
DEFAULT_PRIMARY_COLOR=#007bff
DEFAULT_SECONDARY_COLOR=#6c757d
DEFAULT_LOGO_URL=
DEFAULT_FAVICON_URL=

# Limits
DEFAULT_USERS_PER_TENANT=10
DEFAULT_CONTENT_PER_TENANT=100
DEFAULT_STORAGE_PER_TENANT_GB=1

# Features
DEFAULT_ANALYTICS_ENABLED=true
DEFAULT_API_ACCESS_ENABLED=true
DEFAULT_CUSTOM_DOMAINS_ENABLED=false
